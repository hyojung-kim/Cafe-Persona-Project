<html layout:decorate="~{layout}">
<div layout:fragment="content">
    <link rel="stylesheet" th:href="@{/css/mainPage.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">


    <!-- Cafe Promo Banner -->
    <section class="promo" >
        <div class="promo__inner">
            <p class="promo__subtitle">Ïò§ÎäòÏùò Ïù∏Í∏∞</p>
            <h2 id="promoTitle" class="promo__title">
                Ïò§ÎäòÏùÄ Ïñ¥Îñ§ <em>Ïπ¥Ìéò</em>Í∞Ä ÎÅåÎ¶¨ÎÇòÏöî?
            </h2>

            <a href="/cafe/list" class="promo__cta">ÏûêÏÑ∏ÌûàÎ≥¥Í∏∞</a>

            <!-- Ï∫êÎü¨ÏÖÄ (Thymeleaf Î∞îÏù∏Îî© ÏòàÏãú: liÏóê th:each) -->
            <ul class="promo__list" role="list" aria-label="Ï∂îÏ≤ú Ïπ¥Ìéò" >
                <!-- ÏòàÏãú ÏïÑÏù¥ÌÖúÎì§. Ïã§Ï†ú Ïó∞Í≤∞ Ïãú liÏóê th:each="c : ${topCafes}" -->
                <li class="promo__item" th:each="c : ${todayCafe}">
                    <a class="promo__link"  th:href="@{|/cafe/detail/${c.id}|}" th:aria-label="${c.cafeName}">
                        <img class="promo__thumb" th:src="${#strings.isEmpty(c.primaryImageUrl)} ? '/images/DBimg.PNG' : ${c.primaryImageUrl}"
                             th:alt="|${c.cafeName} Ïç∏ÎÑ§Ïùº|" />
                        <span class="promo__name" th:text="${c.cafeName}">Î™®Ïπ¥Î™®Ïπ¥</span>
                    </a>
                </li>
            </ul>
        </div>
    </section>








    <!-- Hero Search Section -->
    <section class="hero full-width">
        <!-- Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ -->
        <div class="hero__bg" aria-hidden="true"></div>

        <!-- Ïπ¥Îìú ÎûòÌçº -->
        <div class="hero__card" role="search" aria-label="ÎßõÏßë Í≤ÄÏÉâ">
            <div class="hero__grid">
                <!-- Ïù∏ÏÇ¨Îßê -->
                <div class="hero__greeting">
                    <p class="hero__hello">ÏïàÎÖïÌïòÏÑ∏Ïöî.</p>
                    <p class="hero__ask">Ïñ¥Îñ§ Ïπ¥ÌéòÎ•º Ï∞æÏúºÏãúÎÇòÏöî?</p>
                </div>

                <!-- ÏÑ∏Î°ú Íµ¨Î∂ÑÏÑ† -->
                <div class="hero__divider" aria-hidden="true"></div>

                <!-- Í≤ÄÏÉâ ÏòÅÏó≠ -->
                <div class="hero__search">
                    <!-- ÏûÖÎ†•Ï∞Ω -->
                    <!-- Í≤ÄÏÉâ + Ï†ïÎ†¨ Ìèº -->

                    <form class="searchbar" th:action="@{/cafe/list}" method="get">
                        <label class="sr-only" for="q">Í≤ÄÏÉâÏñ¥</label>
                        <div class="searchbar__box">
                            <input name="kw" type="text" placeholder="Ïπ¥ÌéòÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî" autocomplete="off" th:value="${kw}" />
                            <button class="searchbar__filter" type="submit" aria-label="ÌïÑÌÑ∞ Ïó¥Í∏∞">
                                <!-- Í∞ÑÎã®Ìïú ÌÜ±ÎãàÎ∞îÌÄ¥ -->
                                <span class="searchbar__icon" aria-hidden="true">üîç</span>
                            </button>
                        </div>
                    </form>

                    <!-- ÌÉ≠ -->
                    <nav class="search-tabs" aria-label="Í≤ÄÏÉâ ÌÉ≠">
                        <form th:action="@{/cafe/list}" id="filterForm" method="get" class="filter-form">
                            <button class="cta-btn" type="submit" form="filterForm" >Ïπ¥Ìéò Î™©Î°ù Ïù¥ÎèôÌïòÍ∏∞</button>
                        </form>

                    </nav>
                </div>
            </div>
        </div>
    </section>

    <!-- Hot Spots Section -->
    <section class="hotspots" aria-labelledby="hotspots-title">
        <!-- Î∞∞Í≤Ω Îç∞ÏΩîÎäî CSSÎ°ú Ï≤òÎ¶¨ (Ïòà: Ïò§Î†åÏßÄ Í∑∏ÎùºÎîîÏñ∏Ìä∏) -->

        <!-- Section Header -->
        <header class="hotspots__header">
            <h2 id="hotspots-title" class="hotspots__title">Hot Spots</h2>
            <p class="hotspots__subtitle">Ïù∏Í∏∞ Ïπ¥Ìéò</p>
        </header>

        <!-- Carousel / Grid Wrapper -->
        <div class="hotspots__viewport" role="region" aria-roledescription="carousel" aria-label="ÏöîÏ¶ò Ïù∏Í∏∞ Î™©Î°ù">
            <!-- Prev / Next buttons -->

            <!-- Track: Í∞ÄÎ°ú Ïä§ÌÅ¨Î°§/Ïä¨ÎùºÏù¥Îìú Ìä∏Îûô -->
            <ul class="hotspots__track"
                aria-live="polite"
                aria-atomic="false">
                <!-- Ïπ¥Îìú: Ìï≠Î™© 1Í∞ú -->
                <!-- (Thymeleaf ÏòàÏãú: th:each="c : ${hotList}") -->
                <li class="hotcard" th:each="c : ${topCafes}">
                    <a class="hotcard__link" th:href="@{|/cafe/detail/${c.id}|}">
                        <figure class="hotcard__figure">
<!--                            <img class="hotcard__img"-->
<!--                                 th:src=""-->
<!--                                 th:alt="${c.name}"-->
<!--                                 loading="lazy"-->
<!--                                 decoding="async" />-->
                            <!-- ÌïÑÏöî Ïãú ÎùºÎ≤®/Î±ÉÏßÄ -->
                            <img class="hotcard__img" th:src="${imageMap[c.id]} ?: '/images/DBimg.PNG'"
                                 loading="lazy" alt="Ïπ¥Ìéò ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ">

                        </figure>

                        <div class="hotcard__body">
                            <h3 class="hotcard__title" th:text="${c.name}">Ïπ¥ÌéòÎ™Ö</h3>

                            <!-- ÌèâÏ†ê/ÏïÑÏù¥ÏΩò Ï§Ñ -->
                            <div class="hotcard__meta" aria-label="ÌèâÏ†ê Ï†ïÎ≥¥">
                                <!-- Î≥Ñ ÏïÑÏù¥ÏΩò 5Í∞ú (ÏòàÏãú) -->
                                <span class="hotcard__stars" aria-hidden="true" th:text="|‚≠ê ${ratingAvgMap[c.id]}|">
                                 <!-- ÏÑúÎ≤ÑÏóêÏÑú Î≥Ñ Í∞úÏàò Í≥ÑÏÇ∞ or CSS ÎßàÏä§ÌÅ¨Î°ú Ï≤òÎ¶¨ -->
                                    ‚≠ê
                                </span>
<!--                                <span class="hotcard__rating" th:text="${#numbers.formatDecimal(c.avgRating, 1, 1)}">4.2</span>-->
                            </div>

                            <!-- Ï°∞ÌöåÏàò Ï§Ñ -->
                            <div class="hotcard__stats">
                                <span class="hotcard__views" aria-label="Ï°∞ÌöåÏàò">
                            <!-- Îàà ÏïÑÏù¥ÏΩò -->
                                    <span>üëÅ </span>
                                    <span class="hotcard__views-num" th:text="${c.hitCount}"></span>
                                </span>
                            </div>
                        </div>
                    </a>
                </li>
                <!-- /Ïπ¥Îìú Î∞òÎ≥µ ÎÅù -->
            </ul>
        </div>
    </section>



<!--    cafes/149/reviews-->
    <section class="section">
        <div class="container">
            <!-- ÏÑπÏÖò Ìó§Îçî -->
            <div class="section__head">
                <h2 class="section__title">Cafe Reviews</h2>
            </div>

            <!-- Î¶¨Î∑∞ Top4 Ïπ¥Îìú Î¶¨Ïä§Ìä∏ -->
            <div class="review-top4" >
                <!-- Î¶¨Î∑∞ Ïπ¥Îìú -->
                <a class="review-card" th:each="c : ${topReviews}" th:href="@{|/cafes/${c.id}/reviews|}">
                    <!-- ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ -->
                    <div class="review-card__img">
                        <img th:src="${#strings.isEmpty(c.primaryImageUrl)} ? '/images/DBimg.PNG' : ${c.primaryImageUrl}"
                             th:alt="|${c.cafeName} ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ|">
                    </div>

                    <!-- Ïπ¥Îìú Î≥∏Î¨∏ -->
                    <div class="review-card__body">
                        <!-- Ïπ¥ÌéòÎ™Ö -->
                        <h3 class="review-card__title" th:text="${c.cafeName}">Ïπ¥ÌéòÎ™Ö</h3>

                        <!-- Î≥ÑÏ†ê ÌèâÍ∑† + Î¶¨Î∑∞ Í∞úÏàò -->
                        <p class="review-card__rating">
                            <span class="stars">‚òÖ</span>
                            <span class="avg" th:text="${c.avgRating}">ÌèâÍ∑† Î≥ÑÏ†ê</span>
                            <span class="count" th:text="|(${c.reviewsCount}Í∞ú Î¶¨Î∑∞)|">(Î¶¨Î∑∞ Í∞úÏàò)</span>
                        </p>

                         ÏµúÏã† Î¶¨Î∑∞
                        <div class="review-card__snippet">
                            <strong th:text="${c.latestReviewsAuthor}">ÏûëÏÑ±Ïûê</strong>
                            <span th:text="${c.latestReviewsContent}">Î¶¨Î∑∞ ÎÇ¥Ïö© ÎØ∏Î¶¨Î≥¥Í∏∞</span>
                        </div>


                    </div>
                </a>



            </div>
        </div>
    </section>


</div>
</html>


<!--<span class="rating" th:text="|‚≠ê ${ratingAvgMap[cafeList.id]}|">‚≠ê 4.5</span>-->
<!--<span class="likes" th:text="|‚ô• ${likeCountMap[cafeList.id]}| ?: 0">‚ô• 0</span>-->