<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<th:block layout:fragment="headExtra">
    <meta charset="UTF-8" />
    <style>
        .floating-back-btn {
            position: fixed;
            right: 24px;
            bottom: 24px;
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: none;
            background: #6b4a2b;
            color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.18);
            cursor: pointer;
            z-index: 1040;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .floating-back-btn:hover,
        .floating-back-btn:focus {
            transform: translateY(-2px);
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.22);
            outline: none;
        }

        .floating-back-btn__icon {
            font-size: 1.5rem;
            line-height: 1;
        }

        @media (max-width: 768px) {
            .floating-back-btn {
                right: 16px;
                bottom: 16px;
                width: 44px;
                height: 44px;
            }

            .floating-back-btn__icon {
                font-size: 1.25rem;
            }
        }
    </style>
</th:block>

<div layout:fragment="content" class="container mt-4">
    <h2 class="h5 mb-3" th:text="|${cafe.name} 위치 인증|">위치 인증</h2>
    <div id="map" style="width:100%;height:70vh;"></div>
    <div class="mt-2 text-muted small">
        <p id="cafeLocation"></p>
        <p id="myLocation"></p>
        <p id="distanceInfo"></p>
    </div>

    <button type="button"
            class="floating-back-btn"
            onclick="window.history.back()">
        <span class="visually-hidden">이전 페이지로 이동</span>
        <span aria-hidden="true" class="floating-back-btn__icon">&#8592;</span>
    </button>
</div>

<th:block layout:fragment="bodyEndExtra">
    <script th:inline="javascript">
        /*<![CDATA[*/
        var cafeAddress = [[${address1}]];
        var cafeId = [[${cafe.id}]];
        /*]]>*/
    </script>
    <script
            th:src="@{'https://dapi.kakao.com/v2/maps/sdk.js?appkey=8ed22f8047c9ec337686bbb083546da6&libraries=services&autoload=false'}"
            defer></script>
    <script th:src="@{/js/location-certify.js}" defer></script>
</th:block>
</html>
