<!-- Playfair Display 로드 -->


<nav th:fragment="navbarFragment" class="navbar navbar-expand-lg navbar-light bg-light border-bottom fixed-top">
    <link rel="stylesheet" th:href="@{/css/navbar.css}">




    <div class="g-container">
        <div class="nav-inner">
            <div class="nav-left">
                <button type="button" class="nav-back" aria-label="뒤로 가기" onclick="goBack()">
                    <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M15 6l-6 6 6 6" fill="none" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
                <a class="navbar-brand" th:href="@{/}">
                    <img class="brand-logo"
                         th:src="@{/images/Logo.svg}" src="/images/Logo.svg"
                         alt="BeanSpot 로고" loading="eager">
                    <span class="brand-text">BeanSpot</span>
                </a>
            </div>


            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <div sec:authorize="isAuthenticated()" class="d-flex align-items-center gap-2">
                            <form th:action="@{/user/logout}" method="post" class="m-0">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                                <button type="submit" class="nav-link">
                                    로그아웃
                                </button>
                            </form>
                        </div>
                        <div sec:authorize="isAnonymous()" class="d-flex align-items-center gap-2">
                            <a class="nav-link" th:href="@{/login/select}">로그인</a>
                        </div>
                    </li>
                    <li class="nav-item" sec:authorize="isAnonymous()">
                        <a class="nav-link" th:href="@{/signup}">회원가입</a>
                    </li>

                    <li class="nav-item" sec:authorize="isAnonymous()">
                        <a class="nav-link" th:href="@{/businessuser/register}">사업자 회원가입</a>
                    </li>

                    <li class="nav-item" sec:authorize="isAuthenticated()">
                        <a class="nav-link" th:href="@{/mypage}">마이 페이지</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!--    뒤로가기용으로 추가 js-->
    <script>
        function goBack() {
          const sameOriginRef = document.referrer && new URL(document.referrer).origin === location.origin;
          if (sameOriginRef) {
            history.back();
          } else {
            location.replace('/'); // 폴백 경로
          }
        }
    </script>

</nav>