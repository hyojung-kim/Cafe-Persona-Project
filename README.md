
## ☕ BeanSpot 프로젝트
<img width="600" height="auto" alt="image" src="https://github.com/user-attachments/assets/d6d52441-a29b-4aaa-9c51-f68c3b26e7d5" /> <br>
## **BeanSpot 설명**  

상황·취향 맞춤 카페 탐색 추천 및 리뷰 플랫폼  

<br><br>

## ☕Bean Spot 팀원소개

<table border="1" style="border-collapse: collapse; text-align: center;">
  <thead>
    <tr>
      <th width="200">김효중👑</th>
      <th width="200">조현영</th>
      <th width="200">채상진</th>
      <th width="200">황정성</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img width="190" height="190" alt="image" src="https://github.com/user-attachments/assets/7c39b0a5-9df3-4034-ac5a-1ae781c3fdb3" /></td>
      <td><img width="190" height="190" alt="image" src="https://github.com/user-attachments/assets/a93aa25a-2e4d-43ba-99c0-8af9d93fb29d" />
</td>
      <td><img width="190" height="190" alt="image" src="https://avatars.githubusercontent.com/u/84109674?v=4" /></td>
      <td style="text-align: center;">
        <img src="https://github.com/user-attachments/assets/878654ea-a0cc-4dc4-95e2-afa0eb394472" style="display: block; margin: 0 auto;" width="190" height="190" /></td>
    </tr>
    <tr style="text-align: center;">
      <td style="text-align: center;"><a href="https://github.com/hyojung-kim" target="_blank">@hyojung-kim</a></td>
      <td style="text-align: center;"><a href="https://github.com/0n0ng" target="_blank">@0n0ng</a></td>
      <td style="text-align: center;">깃 주소</td>
      <td style="text-align: center;"><a href="https://github.com/HwangJeongSeong" target="_blank">@HwangJeongSeong</a></td>
    </tr>
  </tbody>
</table>

## 🎯 맡은 역할
### 김효중👑  — Full-Stack
<br>

**메인 페이지**
- 인기순 카페 노출
- 리뷰순 카페 (인기순 + 최신리뷰 반영)

**카페 목록 페이지**
- 검색 / 필터 기능 구현  
  (테마별 태그, 주차 가능, 영업중 여부 로직 반영)  
- 평균 별점 및 대표 이미지 표시

**카페 상세 페이지**
- 카페 이미지, 기본 정보, 영업시간, 위치 표시
- 평균 평점 / 리뷰 수 표시
- 좋아요 / 북마크 토글 기능 구현

**데이터 수집**
- Google Place API 활용 → 초기 위치 데이터 크롤링/적재
<br>

#### 조현영
- 일반/사업자 회원 로그인
- OAuth2 기반 구글 회원가입/로그인
- 카카오 로그인 Security처리
- 이메일 인증을 통한 아이디/비밀번호 찾기 
- 세션 기반 마이페이지 내 북마크 조회 및 관리 기능
- 카페 상세페이지 리뷰 Top4 최신/인기순 정렬 기능

#### 채상진
- 일반/사업자 회원 가입
- 카카오 회원가입/로그인
- 다음 api 활용한 주소 검색
- 국세청 api 활용한 사업자 등록번호 검증
- 회원 가입 페이지 실시간 검증
- 개인정보 수정 페이지 비밀번호 재입력 및 뒤로가기 후 앞으로가기, url 복붙으로 접근 막기
- 사업자 등록 페이지에서 내 문서 열어서 사진 등록하기

#### 황정성
- 리뷰 CRUD
- 리뷰 좋아요
- 사업자 로그인과 일반유저 로그인 세션 필터 보정
- 카카오API 활용 위치인증
- 위치인증 지도 마커 그림
- 리뷰 검색, 정렬 필터
- 리뷰 이미지 업로드


## 💻 기술 스택

<div>

### 백엔드
  <img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white">
<img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white">
<img src="https://img.shields.io/badge/springsecurity-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white">
  <br>

### 프론트엔드

  <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> 
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<br>
  <img src="https://img.shields.io/badge/jquery-0769AD?style=for-the-badge&logo=jquery&logoColor=white">
    <img src="https://img.shields.io/badge/bootstrap-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white">
    <img src="https://img.shields.io/badge/fontawesome-339AF0?style=for-the-badge&logo=fontawesome&logoColor=white">

### 데이터베이스 
  <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> 
  <img src="https://img.shields.io/badge/mariaDB-003545?style=for-the-badge&logo=mariaDB&logoColor=white">
  <br>

### 협업 툴
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
<img src="https://img.shields.io/badge/kakaotalk-FFCD00?style=for-the-badge&logo=kakaotalk&logoColor=white">
  <br>
</div>


## 프로젝트 : Bean Spot ERD

<img width="1239" height="795" alt="전체 ERD" src="https://github.com/user-attachments/assets/0c0b4557-b17d-4e00-8b45-2a2e651ff067" />




``` ## 패키지 요약본 
=== JAVA (com.team.cafe) ===
# 백엔드 비즈니스 로직과 엔티티, 서비스, 컨트롤러 등이 들어있는 패키지 구조
cafe/
├── DB/              # SQL 스크립트 및 더미 데이터
├── Find/            # 계정 찾기(아이디/비밀번호) 관련 컨트롤러·서비스
├── Menu/            # 카페 메뉴 도메인 및 CRUD
├── Root/            # 메인 페이지 컨트롤러·서비스·뷰모델
├── bookmark/        # 즐겨찾기/좋아요 파사드 및 도메인
├── businessuser/    # 사업자 회원 도메인, 컨트롤러, 서비스
├── cafeListImg/     # 카페 이미지 업로드/조회 도메인
├── config_js/       # 글로벌 설정(WebMvc, WebClient, ExceptionHandler 등)
├── google/          # 구글 Places API 클라이언트 및 수집 로직
├── kakaosj/         # 카카오 API 연동(지도/검색 등)
├── keyword/         # 키워드(페르소나 태그) 도메인·서비스
├── like/            # 좋아요 도메인·서비스
├── list/            # 카페 목록 검색/조회 컨트롤러·서비스
├── review/          # 리뷰 도메인, 컨트롤러, 서비스, 외부 API 연동 (카카오 MAP 위치인증)
├── signup/          # 회원가입 컨트롤러·서비스
├── test/            # 테스트 컨트롤러/레포
└── user/            # 사용자(SiteUser) 도메인, 보안/인증 서비스


=== RESOURCES/templates ===
# Thymeleaf 템플릿 뷰 파일들 (페이지별 UI 구성)
templates/
├── cafe/        # 카페 상세·목록 페이지
├── fragments/   # 공통 프래그먼트(알림창 등)
├── login/       # 로그인·비밀번호 찾기 템플릿
├── mypage/      # 마이페이지(계정, 카페관리, 북마크)
├── review/      # 리뷰 CRUD 관련 페이지
└── signup/      # 일반/사업자 회원가입 템플릿


=== RESOURCES/static ===
# 정적 리소스 (CSS/JS/이미지). 프론트엔드 스타일과 스크립트
static/
├── css/     # 각 페이지별 스타일
├── js/      # 각 페이지별 동작 스크립트
└── images/  # 배너/아이콘/업로드 이미지
```








# 카페 프로젝트 요구사항서 

> 목적: 사용자의 취향/상황(페르소나·태그)에 맞춰 카페를 탐색·비교·저장·리뷰할 수 있는 웹 서비스 구축. Spring Boot + JPA + Thymeleaf + MariaDB를 기반으로 MVP를 완성하고, 이후 고도화를 위한 기준 문서로 활용한다.

---

## 1) 프로젝트 개요

* **제품명**: Bean spot Project
* **핵심 가치**: 상황·취향 맞춤 카페 탐색(태그 AND 검색), 신뢰 가능한 리뷰·이미지, 북마크/좋아요 저장
* **플랫폼**: Web(SSR: Thymeleaf)
* **기술 스택**: Spring Boot, Spring Security, JPA(Hibernate), MariaDB/MySQL, Thymeleaf, jQuery(선택), Bootstrap/Tailwind(선택)

---

## 2) 사용자 및 페르소나

* **커플/데이트**: 분위기·사진 포인트·조용함, 루프탑/야경 등
* **가족(아이 동반)**: 키즈존/주차/유아 메뉴
* **공부/작업**: 콘센트/와이파이/조용함/장시간
* **여성 이용자**: 디저트·라떼아트·포토존·건강 메뉴
* **남성 이용자**: 커피 전문성·브런치·테라스·드라이브 동선
* **풍경/여행**: 루프탑/시골뷰/드라이브 코스
* **기타**: 반려동물 동반, 심야 영업, 비건, 전시/공연, 팝업


---

## 3) 범위(Scope)

### MVP 포함(Must)

* 회원가입/로그인/로그아웃(세션) SMTP 메일인증 기반 아이디,비밀번호 찾기)
* 카페 목록/검색/필터(태그·주차·영업중)
* 카페 상세(이미지, 기본정보, 영업시간, 위치, 평균평점, 리뷰 수, 좋아요/북마크 수)
* 리뷰 CRUD, 리뷰 이미지 업로드(대표 지정/정렬)
* 좋아요/북마크 토글 + 수 집계
* 키워드/태그 관리 및 필터링(유형별 그룹)
* 카드 리스트 성능 최적화(배치 API로 이미지/좋아요/평점/북마크 묶음)
* 소셜 로그인(카카오, 구글)
* 맵 위치인증 기반 리뷰작성
* 구글Place Api 카페초기 데이터 작성 (카페명, 주소 등)
* 사업자/관리자 화면(카페 정보/메뉴 관리
* 카카오 api 기반 도로명/지번 주소검색

### 차기 포함(Should)

* 리뷰 신고/처리(Report)
* 사용자 성향 테스트



---

## 4) 기능 요구사항

### 4.1 인증/사용자

* 이메일/닉네임/비밀번호 기반 가입, 비밀번호 재설정(토큰)
* 로그인 없이도 목록/상세/검색 가능, **리뷰/좋아요/북마크는 로그인 필요**
* 권한: `ROLE_USER`, `ROLE_BUSINESS`, `ROLE_ADMIN`
* 메일인증 기반 아이디찾기 / 비밀번호찾기
* 구글/카카오 소셜로그인
  
### 4.2 카페 목록/검색/필터

* 파라미터: `kw, page, size, sort, dir, parking(Boolean), openNow(Boolean), keyList(List<Long>)`
* 정렬: 최신순(default), 이름순, 인기순

* **영업 중 판정 로직**

  * 일반 케이스: `openTime <= closeTime` → `open ≤ now ≤ close`
  * 야간영업(자정 넘김): `openTime > closeTime` → `now ≥ open` OR `now ≤ close`
* 결과 카드에는: 대표 이미지, 카페명, 주소(도시/구/상세), 영업시간, 평점 평균, 좋아요/북마크 수
  
* **배치 통계 API**로 카드에 필요한 값 일괄 조회(IDs), 쿼리복잡도 줄이고 서버 효율 증가

### 4.3 카페 상세

* 기본정보 + 소개글 + 위치 + 영업시간 + 태그(칩)
* 카페 이미지 갤러리(대표/정렬), 좋아요/북마크 토글 상태, 평균 평점/리뷰 수
* 리뷰 리스트(최근순/평점순), 메뉴 목록
* 주소데이터 기반 맵 위치 표시
  

### 4.4 좋아요 & 북마크

* 개념 분리: `CafeLike` / `Bookmark` 별도 조인 엔티티
* 유니크: `(user_id, cafe_id)` 중복 불가
* 토글 응답: `{ liked/bookmarked, count }`
* **정책 옵션**: 좋아요 성공 시 자동 북마크 생성(서비스에서 `ensureExists`)

### 4.5 리뷰/이미지/신고

* 리뷰: 평점(1\~5), 본문(TEXT), 작성·수정·삭제(작성자/관리자)
* 리뷰이미지: `multipart/form-data` 업로드, 대표 1개 보장, 정렬
* 리뷰신고(차기): 사유(enum), 상세, 처리상태(PENDING/APPROVED/REJECTED)
* 작성 전제 조건: 위치인증(Location Verification) 완료 사용자만 작성 가능

### 4.6 키워드/태그

* `KeywordType`(페르소나/공간특성/메뉴특성 등)
* `CafeKeyword`로 카페-키워드 연결(중복 방지)
* **검색 로직**: 다중 태그 AND 방식 구현

(차기사항)
→ 미존재시 태그 매칭 fallback → 인기순/이름순 정렬

ex) 3개의 키워드 선택
사용자 선택 태그: [데이트, 루프탑, 디저트]

1차: AND 검색(3/3 매칭) - (1차)

세 태그를 모두 가진 카페만 노출.

결과가 0개면 2차: 완화 검색(2/3 매칭)

세 태그 중 적어도 2개를 가진 카페를 노출.

### 4.7 사업자/관리자

* 카페 정보/메뉴/이미지 관리(BUSINESS)
  기본: 카페명, 소개문, 전화번호, 영업시간, 메뉴 등
* 대상 권한: ROLE_BUSINESS 이상만 이용가능
* 사업장 주소 등록 시 카카오(다음) 우편번호 서비스 기반 검색 제공
  

### 4.8 차기 사항 (Should)
* 리뷰 신고/처리(ADMIN)
* 사용자 성향 테스트

---

## 5) 비기능 요구사항(NFR)


* **보안**: 비밀번호 해시(BCrypt), CSRF 방어, 인증 필요 API 보호, 파일 업로드 확장자

---


## 6) 화면/UX 요구사항

* **공통 테마**: 따뜻하고 미니멀한 카페 톤, 라운드·은은한 그림자, 칩 컴포넌트
* **목록**: 4×3 카드 그리드(데스크톱), 반응형(모바일 2열)
* **검색바/필터**: 상단 고정, 체크 시 선택 칩 노출, 초기화 버튼
* **상세**: 헤더(대표 이미지/기본정보/토글), 탭(정보/리뷰/사진)
* **접근성/피드백**: 토글/업로드 시 스낵바/아이콘 상태 전환

---

## 7) 정책/규칙

* 리뷰 평점: 1\~5 정수(서버 검증)
* 좋아요·북마크: 사용자당 카페 1개만(UNIQUE)
* 리뷰: (정책 선택) 사용자당 카페 다수, 다수 허용 시 수정 이력 보관 고려
* 이미지: 한 리뷰에 대표 1개 보장(서비스 or DB 제약)
* 검색 태그: 태그 다중 선택 검색, 미존재 시 조건완화
* 조회수(views) 상세 페이지 렌더링 시 1회 처리
	로그인 사용자: (userId, cafeId) 기준 12시간 내 재방문은 미측정
	비로그인 사용자: (clientId 쿠키, cafeId) 기준 12시간 내 미측정.
    첫 방문 시     clientId 발급(1년 만료)


---


## 8) 테스트 기준

### 8.1 카페 목록 검색

* [ ] `kw`가 이름/주소/도시에 부분 일치하면 노출된다
* [ ] `parking=true`면 주차 가능한 카페만 노출된다
* [ ] `openNow=true`면 현재 영업 중인 카페만 노출된다(자정 넘김 케이스 포함)
* [ ] `keyList` 선택 갯수만큼 AND 매칭, 현재 완화조건 없음

### 8.2 좋아요/북마크 토글

* [ ] 로그인하지 않으면 401/리다이렉트 처리한다
* [ ] 최초 클릭 시 생성되고, 재클릭 시 해제된다
* [ ] 응답에 최신 카운트가 반환된다
* [ ] 좋아요 성공 시 북마크가 보장된다

### 8.3 리뷰/이미지

* [ ] 평점 1\~5 이외면 400을 반환한다
* [ ] 작성자는 본인 리뷰만 수정/삭제할 수 있다
* [ ] 이미지 업로드는 허용 확장자/최대 용량을 초과하면 거부한다
* [ ] 대표 이미지를 변경하면 기존 대표는 자동 해제된다

---

# 페이지 소개

### 1.메인페이지

<img width="700" height="auto" alt="localhost_8080_main (8)" src="https://github.com/user-attachments/assets/29f06268-9d4e-48e6-be4e-18f59c6500b2" />


- 배너 : 오늘 날짜기준 인기순 카페 바로가기
- 검색영역 : 카페이름으로 검색하여 이동 혹은 목록으로 바로가기
- 카페 추천 섹션 : 인기순 정렬된 카페 선택 바로가기, 카페 리뷰순 정렬 후 최신 리뷰1건씩 표시

<br><br>
### 2.목록페이지

<img width="700" height="auto" alt="localhost_8080_cafe_list_" src="https://github.com/user-attachments/assets/f9ae9574-8887-428c-94fd-3e8668fd04f7" />

- 상단 필터 목록 : 4가지 타입으로 분류된 테마별 키워드 태그
- 하단 필터 : 주차여부, 영업여부, 인기순 , 등록순, 이름순 등의 필터
- 목록 카드섹션 : 카페명, 영업표시, 목록별 평균 별점, 좋아요(북마크) 카운트, 조회수
- 하단 페이징 기능
<br><br>
### 3. 상세페이지

<img width="700" height="auto" alt="localhost_8080_cafe_detail_149" src="https://github.com/user-attachments/assets/e71b2654-39dc-4bc4-bb50-baef38732c04" />

- 상단 카페소개 : 카페명, 평균별점, 리뷰 갯수, 조회수, 주소, 카페 핵심키워드태그, 소개문구, 영업시간, 번호, 편의시설, 웹사이트, 메뉴목록
- 카페 지도위치 : 등록된 주소 기준 지도 표시
- 하단 리뷰 목록 : 리뷰 목록 4개 , 최신순 인기순 정렬 선택, 리뷰페이지로 이동
<br><br>

---


### 3. 로그인

<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/f2b00cb4-796f-4a5f-9986-30db031f779e" />
<br>

#### 3-1. 일반 유저 로그인

- 아이디/비밀번호 입력창
- 로그인 버튼 : security로 정보 일치시 로그인 (Role User만 가능)
- 소셜 로그인 버튼 : 각 페이지 이동 후 로그인
- 하단 3버튼 : 각 이름에 맞는 페이지로 이동
<br><br><br>

<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/87c6b2c1-a575-44af-b7dd-a2d668ea72c2" />
<br>

#### 3-2. 사업자 유저 로그인

- 아이디/비밀번호 입력창
- 로그인 버튼 : security로 정보 일치시 로그인 (Role Business만 가능)
- 하단 3버튼 : 각 이름에 맞는 페이지로 이동
<br><br><br>

<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/a63c8b54-d334-4371-baa8-3884371b0216" />
<br>

#### 3-3. 아이디 찾기

- DB에 저장된 이메일 입력시 해당 이메일로 인증번호 발송
- 인증번호 입력 후 일치시 아이디 출력
<br><br><br>

<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/244f1bfd-b9d1-4701-8dec-aa6f1125d441" />
<br>

#### 3-4. 비밀번호 찾기

 - DB에 저장된 아이디와 이메일 일치시 이메일로 인증번호 발송
 - 인증번호 입력 후 일치시 비밀번호 재설정
<br><br><br>


---




<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/c3092b52-1f4c-4a1a-ae32-41990779aa76" />
<br>5회원가입
<br>
실시간 중복 검증 기능, 비밀번호 특스문자 포함
<br><br>

<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/26363d28-a553-45fa-b6e5-b415535bd18c" />
<br>6사업자회원가입
<br>
주소 검색 기능과 사업자등록번호 검증 기능에서 힘을 쓰기는 했지만 시작부터 방향성이 잘 못 됐다는 걸 인지하고 바로 해결
<br><br>

<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/416c606c-eb72-4432-9b07-990a5eafae15" />
<br>7내 북마크 목록
<br><br><br>

<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/79fbb030-5fb0-49bb-865b-63df64dfb695" />
<br>8내정보수정
<br>
내 정보 수정 뒤로 가기 한 후 앞으로 가기, url 복사로 접근 막는 부분에서 애를 먹었으나 집념으로 해결
<br><br>

<img width="700" height="auto" alt="localhost_8080_mypage_cafe_manage_cafeId=270 reauth=facbb740-a064-472b-bbe2-a8e6d067a2cd" src="https://github.com/user-attachments/assets/72d40c4d-ba9e-4f90-ac59-ade23896f40d" />
<br>9사업장관리
<br>
북마크, 리뷰, 평점 등 팀원들이 만든 부분을 연결해서 보여 주다 보니 어려움이 있었지만 팀원들 코드 면밀히 보면서 해결
<br><br>

<img width="700" height="auto" alt="사업장수정" src="https://github.com/user-attachments/assets/9b45c0d8-1f1f-43d0-b0cc-04cd5279cb26" />
<br>10 사업장 수정
<br>
사진 등록 하고 저장되는 파일이 팀원과 달라 표시되지 않는 문제가 있었지만 서로 사진을 보여주는 페이지가 달라서 분리하고 해결
<br><br>


---
# 리뷰

### 리뷰 리스트
<img width="700" height="auto" alt="리뷰" src="https://github.com/user-attachments/assets/0cb7582a-5712-4c99-bea4-d931d51c2e56" />
<ul>
<li>위치 인증 후 리뷰 작성가능</li>
<li>리뷰 좋아요</li>
<li>리뷰 대표이미지</li>
<li>리뷰 검색, 정렬필터</li>
<li>이미지는 3장, 내용은 300자 까지 노출</li>
<li>대표 이미지 10장까지 슬라이딩</li>
<li>리뷰 CRUD</li>
</ul>
<br><br>

### 위치인증
<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/f069418d-2d6e-4be6-942f-01a6b64b6614" />
<br>
<ul>
<li>사용자가 카페로 부터 50m 이내 5초 동안 머무를 경우 위치인증 성공</li>
<li>카페 마커는 갈색, 사용자 마커는 smile face</li>
<li>카페와 사용자의 위치 표시</li>
<li>위치인증 5초 로딩 구현</li>
</ul>

<br><br>

### 리뷰 작성
<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/0ff143fb-4285-4d9d-aa2b-5dfca9c7cda4" />
<br>
<ul>
<li>위치인증 후 리뷰 작성</li>
<li>5자 이상 4000자 이하, 이미지는 5장까지</li>
<li>최소 0.5점, 최대 5점 별점 부여 가능</li>
<li>리뷰 재작성시 위치 인증 재시도 필요</li>
</ul>
<br><br>

### 리뷰 디테일
<img width="700" height="auto" alt="image" src="https://github.com/user-attachments/assets/9f089593-2094-41c3-90c0-e26a42347450" />
<br>
<ul>
	<li>리뷰 CRUD</li>
	<li>이미지 슬라이딩으로 이미지 5장 전체 보기</li>
	<li>리뷰 컨텐츠 전체 보기</li>
	<li>리퀴드 글라스로 이미지 확대 보기가능</li>
</ul>
<br><br>

### 리뷰 수정
<img width="700" height="auto" alt="localhost_8080_reviews_4003_edit" src="https://github.com/user-attachments/assets/6b76cfb2-9d6f-489b-803b-7352318241ed" />
<br>
<ul>
	<li>작성된 리뷰 에서 수정</li>
	<li>리뷰 이미지 수정 가능</li>
</ul>
<br><br>

---

## 🚀트러블 슈팅

### 🚨김효중 <br>
📍 **문제 상황** <br>
<br>

- 초기 버전 Pageable + JPQL(@Query)로 등록일(createdAt), 이름(name), 조회수(viewCount) 정렬 <br>
  요구사항 증가: keyword 타입별 AND 매칭(선택한 키워드 모두 포함) + 키워드 기반 정렬 필요 <br>
  동시에 기존 WHERE 필터(주차/영업)와 ORDER BY(조회/이름/등록)을 유지 <br>
  JPQL + Pageable Sort만으로는 한계가 있음 <br>
  
<br>

- 필터태그가 모두 적용된 Cafe 엔티티를 페이징/정렬로 조회 했으나.<br>
화면 카드에 평균 별점, 리뷰 수, 좋아요 수, 대표 이미지 등 부가정보가 추가로 필요. 기존로직에 추가하면 쿼리 복잡도 증가함.<br>
또한 LAZY 컬렉션 접근하면 N+1 쿼리 발생.
<br>

✅ **문제 해결**  <br>


- Native Query 전환 → WHERE + ORDER BY + GROUP BY + HAVING 커스터마이즈 <br>
  다중 선택 파라미터(키워드 목록) + 기존 필터(주차/영업/주소 검색) + 페이지 변경 시나리오까지
  일관 동작하도록 리팩터링 완료
  
<br>

- IDs 배치 전략:
먼저 Cafe의 ID 페이지만 정렬/필터/페이징으로 뽑고,
그 ID 집합으로 통계/이미지/태그를 IN 배치 쿼리로 한 번씩 가져와 머지함

		  
		  
### 🚨채상진

📍 **문제 상황**

- 마이페이지는 인증이 필요한 화면이었지만, URL을 직접 붙여넣거나 뒤로가기 > 앞으로가기를 사용할 때 브라우저가 이전 화면을 그대로 복원하면서
인증 없이 화면이 보임

✅ **문제 해결**

- 프론트엔드에서 페이지 진입 시마다 로그인 상태를 확인하고, 인증 정보가 존재하더라도 페이지 진입 시마다 다시 한 번 로그인 상태를 검증하도록 처리함
- 이를 통해 브라우저 이동이나 캐시 복원 상황에서도 항상 동일한 기준으로 접근을 제어하도록 개선함
### 🚨조현영

#### 🛑 Security 기반 소셜 로그인 처리 오류 🛑

📍 **문제 상황**

- 로그인 성공 시점에서 유저 정보가 저장 되었지만 Security자체에선 SecurityContext가 세션에 안 들어감
</br>▶▶▶ 로그인 처리가 안 되어 화면에선 로그인 처리가 안 된 걸로 보임 ( 로그인버튼 -> 로그아웃버튼 변경❌)

✅ **문제 해결**

- 카카오 로그인 처리 후 인증 객체 토큰을 만들어 auth를 SecurityContext에 주입하여 세션에 저장
</br>▶▶▶ Security가 로그인 인증 처리를 하여 화면에서도 로그인 처리가 되었고, 모든 권한 일반 로그인 유저와 같이 부여됨 ( 로그인버튼 -> 로그아웃버튼 변경 ⭕)
### 🚨황정성

<br><br>
---

## 📺 프로젝트 시연 영상

[![BeanSpot 프로젝트 시연](https://img.youtube.com/vi/nvzq5ZW2wJI/0.jpg)](https://www.youtube.com/watch?v=nvzq5ZW2wJI)
<br>

